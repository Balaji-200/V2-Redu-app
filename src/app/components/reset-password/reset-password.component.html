<mat-toolbar color="primary">
  <h1 class="mat-h1">V2-Redu</h1>
</mat-toolbar>
<mat-spinner color="primary" *ngIf="!username"></mat-spinner>

<div fxLayout="row" fxLayoutAlign="center center" *ngIf="username" style="height: 80vh">
  <mat-spinner color="primary" *ngIf="processing"></mat-spinner>
  <mat-card *ngIf="!processing" class="resetForm">
    <mat-card-title>
      <h1>Reset Password</h1>
    </mat-card-title>
    <mat-card-content>
      <form novalidate [formGroup]="resetForm" (ngSubmit)="resetPassword()">
        <mat-form-field appearance="outline" style="width: 100%; margin-bottom: 1em">
          <mat-label>New Password</mat-label>
          <input name="password" matInput placeholder="Enter your new password" formControlName="password"
                 [type]="hidePass ? 'password':'text'"
                 required
          >
          <button mat-icon-button matSuffix (click)="hidePass = !hidePass" type="button">
            <mat-icon>{{ hidePass ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="formErrors.password">{{formErrors.password}}</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" style="width: 100%; margin-bottom: 1em">
          <mat-label>Confirm Password</mat-label>
          <input name="confirmPassword" matInput placeholder="Confirm your new Password"
                 formControlName="confirmPassword"
                 [type]="hideConf ? 'password':'text'" required
          >
          <button mat-icon-button matSuffix (click)="hideConf = !hideConf" type="button">
            <mat-icon>{{ hideConf ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <mat-error *ngIf="formErrors.confirmPassword">{{formErrors.confirmPassword}}</mat-error>
        </mat-form-field>
        <div *ngIf="!passMatch" class="alert alert-danger alert-dismissible fade show" role="alert">
          <strong>Password</strong> and <strong>Confirm Password</strong> does not match.
          <button type="button" class="close" data-dismiss="alert" aria-label="Close"
                  (click)="passMatch = !passMatch">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div fxLayout="row" fxLayoutAlign="end center">
          <button mat-button type="reset" class="bg-secondary text-light mr-3">Reset</button>
          <button mat-raised-button type="submit" color="primary" >Submit</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
